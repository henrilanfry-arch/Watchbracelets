<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Choix Bracelet de Montre</title>
  <meta name="robots" content="noindex,nofollow" />
  <style>
    :root{
      --bg:#0b0f14; --muted:#9fb0c3; --text:#e8f0ff; --accent:#6aa6ff;
      --border:rgba(255,255,255,.08); --shadow:0 12px 30px rgba(0,0,0,.35);
      --radius:18px;
      font-synthesis-weight:none;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:radial-gradient(1200px 900px at 20% 0%, #111c2d, transparent 60%),
                      radial-gradient(900px 700px at 80% 20%, #0f2a2a, transparent 60%),
                      var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      line-height:1.4;
    }
    a{color:inherit}
    .wrap{max-width:1120px; margin:0 auto; padding:28px 16px 44px}
    header{
      display:flex; gap:14px; align-items:flex-start; justify-content:space-between; flex-wrap:wrap;
      margin-bottom:18px;
    }
    .title{display:flex; flex-direction:column; gap:6px}
    h1{margin:0; font-size:22px; letter-spacing:.2px}
    .sub{color:var(--muted); font-size:13px; max-width:70ch}
    .toolbar{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
      background:rgba(255,255,255,.03);
      border:1px solid var(--border);
      padding:10px; border-radius:var(--radius);
      box-shadow: var(--shadow);
    }
    .chipbar{display:flex; gap:8px; flex-wrap:wrap}
    .chip{
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      color:var(--text);
      padding:7px 10px;
      border-radius:999px;
      cursor:pointer;
      font-size:12px;
      user-select:none;
      transition:.15s ease;
      display:inline-flex; gap:6px; align-items:center;
    }
    .chip.active{
      border-color:rgba(106,166,255,.55);
      background:rgba(106,166,255,.12);
    }
    .chip:hover{transform:translateY(-1px)}
    .search{
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      color:var(--text);
      padding:8px 10px;
      border-radius:12px;
      min-width:240px;
      outline:none;
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap:14px;
      margin-top:12px;
    }
    .card{
      grid-column: span 6;
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--border);
      border-radius:var(--radius);
      overflow:hidden;
      box-shadow: var(--shadow);
      position:relative;
      transition:.18s ease;
      cursor:pointer;
    }
    .card:hover{transform:translateY(-2px)}
    .card.selected{
      border-color: rgba(106,166,255,.7);
      box-shadow: 0 16px 45px rgba(0,0,0,.45);
    }
    .top{
      padding:14px 14px 10px;
      display:flex; flex-direction:column; gap:8px;
    }
    .brand{color:var(--muted); font-size:12px}
    .name{font-size:16px; margin:0}
    .badges{display:flex; gap:7px; flex-wrap:wrap}
    .badge{
      font-size:11px; color:#cfe0ff;
      background:rgba(106,166,255,.10);
      border:1px solid rgba(106,166,255,.22);
      padding:5px 8px; border-radius:999px;
    }
    .desc{color:var(--muted); font-size:13px; margin:0}
    .images{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:0;
      border-top:1px solid var(--border);
    }
    .images img{
      width:100%; height:240px; object-fit:cover; display:block;
      background:#0a0f16;
    }
    .actions{
      display:flex; gap:10px; align-items:center; justify-content:space-between;
      padding:12px 14px 14px;
      border-top:1px solid var(--border);
      background:rgba(0,0,0,.18);
    }
    .btn{
      display:inline-flex; gap:8px; align-items:center; justify-content:center;
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      color:var(--text);
      padding:9px 10px;
      border-radius:12px;
      font-size:12px;
      text-decoration:none;
      transition:.15s ease;
      white-space:nowrap;
    }
    .btn:hover{transform:translateY(-1px); border-color:rgba(255,255,255,.18)}
    .btn.primary{
      border-color:rgba(106,166,255,.55);
      background:rgba(106,166,255,.14);
    }
    .footerbar{
      margin-top:14px;
      display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap;
      padding:12px 14px;
      border:1px solid var(--border);
      border-radius:var(--radius);
      background:rgba(255,255,255,.03);
      box-shadow: var(--shadow);
    }
    .pick{display:flex; flex-direction:column; gap:3px}
    .pick .label{color:var(--muted); font-size:12px}
    .pick .value{font-size:13px}
    .small{color:var(--muted); font-size:12px}
    .debug{
      margin-top:14px;
      padding:12px 14px;
      border:1px dashed rgba(255,255,255,.20);
      border-radius: var(--radius);
      color: var(--muted);
      font-size: 12px;
      display:none;
      background: rgba(0,0,0,.18);
    }
    @media (max-width: 920px){
      .card{grid-column: span 12}
      .images img{height:220px}
      .search{min-width: 180px; flex: 1}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="title">
        <h1>Choix du bracelet de montre</h1>
        <div class="sub">
          Clique un bracelet pour le sélectionner. Filtre par marque ou cherche par mot-clé (matière, “navy”, etc.).
          <span class="small">(* Site statique : 1 fichier, parfait pour GitHub Pages.)</span>
        </div>
      </div>

      <div class="toolbar">
        <input id="search" class="search" placeholder="Rechercher… (ex: chevre, saffiano, rubber, alligator)" />
        <div class="chipbar" id="chips"></div>
      </div>
    </header>

    <div class="footerbar">
      <div class="pick">
        <div class="label">Sélection actuelle</div>
        <div class="value" id="pickedValue">Aucune</div>
      </div>
      <a class="btn primary" id="pickedLink" href="#" target="_blank" rel="noopener">Ouvrir la page produit</a>
    </div>

    <div class="grid" id="grid"></div>
    <div class="debug" id="debug"></div>
  </div>

<script>
(function(){
  const debugEl = document.getElementById("debug");
  function showDebug(msg){
    debugEl.style.display = "block";
    debugEl.textContent = msg;
  }

  // Si le JS plante, on l’affiche au lieu de laisser un écran “vide”.
  window.addEventListener("error", (e) => {
    showDebug("Erreur JS: " + (e.message || "inconnue"));
  });

  // Image de secours (SVG inline, zéro dépendance)
  const FALLBACK_IMG =
    "data:image/svg+xml;charset=utf-8," +
    encodeURIComponent(`
      <svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800">
        <defs>
          <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0" stop-color="#0b0f14"/>
            <stop offset="1" stop-color="#111c2d"/>
          </linearGradient>
        </defs>
        <rect width="100%" height="100%" fill="url(#g)"/>
        <g fill="none" stroke="rgba(255,255,255,.18)" stroke-width="6">
          <rect x="80" y="80" width="1040" height="640" rx="28"/>
          <path d="M150 610 L430 360 L620 520 L800 380 L1050 610" />
          <circle cx="360" cy="290" r="70"/>
        </g>
        <text x="50%" y="52%" dominant-baseline="middle" text-anchor="middle"
              fill="rgba(255,255,255,.55)" font-family="Arial, Helvetica, sans-serif"
              font-size="42">
          Image indisponible
        </text>
      </svg>
    `);

  // Données (HANDDN = version “qui marchait” via WatchVault)
  const straps = [
    {
      id: "handdn-togo-navy",
      brand: "HANDDN",
      name: "Navy Togo Leather Watch Strap",
      material: "Cuir Togo (veau) – grain marqué",
      desc: "Cuir Togo : grain prononcé, très souple, excellent confort au quotidien.",
      url: "https://handdn.com/product/navy-togo-leather-watch-strap/",
      img1: "https://www.watchvault.com.au/cdn/shop/files/TogoCalfLeatherWatchStrapWatchVaultNavy01_e94140b1-4b59-479e-9dd6-9b9563fc6b59_2048x2048.jpg?v=1689055464",
      img2: "https://www.watchvault.com.au/cdn/shop/files/TogoCalfLeatherWatchStrapWatchVaultNavy02_a708cf20-c5bc-4e88-bd5e-a1fb000bb665_2048x2048.jpg?v=1689055464"
    },
    {
      id: "handdn-chevre-navy",
      brand: "HANDDN",
      name: "Navy Alran Chevre Leather Watch Strap",
      material: "Chevre Alran (chèvre) – grain fin",
      desc: "Chevre Alran : texture fine et grainée, légère, durable, très agréable au poignet.",
      url: "https://handdn.com/product/navy-alran-chevre-leather-watch-strap/",
      img1: "https://www.watchvault.com.au/cdn/shop/files/AlranChevreLeatherWatchStrapWatchVaultNavyBlue02_958aa4f8-3fa2-4617-9562-a05b45705025_2048x2048.jpg?v=1688962744",
      img2: "https://www.watchvault.com.au/cdn/shop/files/AlranChevreLeatherWatchStrapWatchVaultNavyBlue03_763b1dc5-3e7e-402c-bb66-71242c247583_2048x2048.jpg?v=1688962744"
    },
    {
      id: "handdn-saffiano-navy",
      brand: "HANDDN",
      name: "Navy Saffiano Leather Watch Strap",
      material: "Saffiano (grain embossé) – résistant",
      desc: "Saffiano : grain régulier, look habillé, réputé pour la résistance (eau/griffures).",
      url: "https://handdn.com/product/navy-saffiano-leather-watch-strap/",
      img1: "https://www.watchvault.com.au/cdn/shop/files/SaffianoLeatherWatchStrapWatchVaultRoyalBlue01_c592d13a-6b25-4572-86eb-a756fc70af96_2048x2048.jpg?v=1689053564",
      img2: "https://www.watchvault.com.au/cdn/shop/files/SaffianoLeatherWatchStrapWatchVaultRoyalBlue02_3863ecba-1a44-436f-81f2-81858c3dc568_2048x2048.jpg?v=1689053564"
    },

    {
      id: "delugs-chevre-slim-navy",
      brand: "Delugs",
      name: "Navy Chevre Slim Strap",
      material: "Chevre (Alran) – cuir de chèvre",
      desc: "Chevre Alran : texture grainée, très douce, excellente tenue dans le temps.",
      url: "https://delugs.com/collections/handcrafted-leather-straps/products/navy-chevre-leather-slim-watch-strap?_pos=8&_fid=89be8c1da&_ss=c",
      img1: "https://delugs.com/cdn/shop/files/ChevreNavySlim.jpg?width=1200",
      img2: "https://delugs.com/cdn/shop/files/20210924-DSC08345_7d86ac49-d94f-43fd-9344-3afccc3f4b45.jpg?width=1200"
    },
    {
      id: "delugs-alligator-matte-navy",
      brand: "Delugs",
      name: "Matte Navy Alligator Signature Strap",
      material: "Alligator (véritable) – finition mate",
      desc: "Alligator matte navy : le classique “dress” qui upgrade instantanément une montre.",
      url: "https://delugs.com/collections/handcrafted-leather-straps/products/matte-navy-alligator-leather-signature-watch-strap?_pos=1&_fid=199187605&_ss=c",
      img1: "https://delugs.com/cdn/shop/files/AlligatorMatteNavySignature_1_f7cd9e3f-8958-4441-970d-4280c129879d.jpg?width=1200",
      img2: "https://delugs.com/cdn/shop/files/20221019-DSC04926_9ed2398d-09ac-4468-a982-f736979c5815.jpg?width=1200"
    },
    {
      id: "delugs-saffiano-stitchless-navy",
      brand: "Delugs",
      name: "Navy Saffiano Stitchless Strap",
      material: "Saffiano – stitchless",
      desc: "Saffiano + construction stitchless : look clean, strap robuste pour tous les jours.",
      url: "https://delugs.com/products/navy-saffiano-leather-stitchless-watch-strap",
      img1: "https://delugs.com/cdn/shop/files/Saffiano_Navy_Stitchless_1.jpg?width=1200",
      img2: "https://delugs.com/cdn/shop/files/20221019-DSC04929_a16f4eac-ebc8-4a80-af7c-7ce8a825a95c.jpg?width=1200"
    },

    {
      id: "wristbuddys-sailcloth-navy",
      brand: "Wristbuddys",
      name: "Navy Blue Rubberised Sailcloth Strap",
      material: "Sailcloth rubberisé (style sport)",
      desc: "Look sailcloth sportif, plus tolérant à l’usage (eau/sueur) qu’un cuir classique.",
      // lien stable + fallback
      url: "https://wristbuddys.com/products/navy-blue-rubberised-sailcloth-leather-strap-19mm-20mm",
      url_fallback: "https://wristbuddys.com/en-fr/products/navy-blue-rubberised-sailcloth-leather-strap-19mm-20mm?variant=51974652363079",
      img1: "https://wristbuddys.com/cdn/shop/files/navy-blue-rubberised-sailcloth-leather-watch-strap-wristbuddys-front.jpg?width=1200",
      img2: "https://wristbuddys.com/cdn/shop/files/navy-blue-rubberised-sailcloth-leather-watch-strap-wristbuddys-onwrist.jpg?width=1200"
    }
  ];

  // UI state
  let selectedId = null;
  let activeBrand = "Tous";
  let query = "";

  const grid = document.getElementById("grid");
  const chips = document.getElementById("chips");
  const search = document.getElementById("search");
  const pickedValue = document.getElementById("pickedValue");
  const pickedLink = document.getElementById("pickedLink");

  function uniqBrands(){
    const set = new Set(straps.map(s => s.brand));
    return ["Tous", ...Array.from(set).sort()];
  }

  function renderChips(){
    chips.innerHTML = "";
    uniqBrands().forEach(b => {
      const el = document.createElement("div");
      el.className = "chip" + (b === activeBrand ? " active" : "");
      el.textContent = b;
      el.onclick = () => { activeBrand = b; render(); renderChips(); };
      chips.appendChild(el);
    });
  }

  function matches(s){
    const hay = (s.brand + " " + s.name + " " + s.material + " " + s.desc).toLowerCase();
    const okBrand = (activeBrand === "Tous") || (s.brand === activeBrand);
    const okQuery = !query || hay.includes(query);
    return okBrand && okQuery;
  }

  function setSelected(id){
    selectedId = id;
    const s = straps.find(x => x.id === id);
    pickedValue.textContent = s ? `${s.brand} — ${s.name}` : "Aucune";
    pickedLink.href = s ? (s.url || "#") : "#";
    pickedLink.style.opacity = s ? "1" : ".55";
    pickedLink.style.pointerEvents = s ? "auto" : "none";
    render();
  }

  // fabrique une <img> robuste
  function makeImg(src, alt){
    const img = document.createElement("img");
    img.loading = "lazy";
    img.src = src;
    img.alt = alt;
    img.onerror = () => {
      // Empêche boucle infinie si fallback cassé
      if (img.src !== FALLBACK_IMG) img.src = FALLBACK_IMG;
    };
    return img;
  }

  function cardTemplate(s){
    const card = document.createElement("div");
    card.className = "card" + (s.id === selectedId ? " selected" : "");
    card.onclick = () => setSelected(s.id);

    const actions = document.createElement("div");
    actions.className = "actions";

    const left = document.createElement("div");
    left.style.display = "flex";
    left.style.gap = "8px";
    left.style.flexWrap = "wrap";

    const btnMain = document.createElement("a");
    btnMain.className = "btn primary";
    btnMain.href = s.url;
    btnMain.target = "_blank";
    btnMain.rel = "noopener";
    btnMain.textContent = "Voir produit";
    btnMain.onclick = (e) => e.stopPropagation();
    left.appendChild(btnMain);

    if (s.url_fallback){
      const btnFb = document.createElement("a");
      btnFb.className = "btn";
      btnFb.href = s.url_fallback;
      btnFb.target = "_blank";
      btnFb.rel = "noopener";
      btnFb.textContent = "Lien bis";
      btnFb.onclick = (e) => e.stopPropagation();
      left.appendChild(btnFb);
    }

    const right = document.createElement("span");
    right.className = "small";
    right.textContent = (s.id === selectedId) ? "✅ Sélectionné" : "Cliquer pour sélectionner";

    actions.appendChild(left);
    actions.appendChild(right);

    const top = document.createElement("div");
    top.className = "top";
    top.innerHTML = `
      <div class="brand">${s.brand}</div>
      <h3 class="name">${s.name}</h3>
      <div class="badges"><span class="badge">${s.material}</span></div>
      <p class="desc">${s.desc}</p>
    `;

    const images = document.createElement("div");
    images.className = "images";
    images.appendChild(makeImg(s.img1, `${s.name} photo 1`));
    images.appendChild(makeImg(s.img2, `${s.name} photo 2`));

    card.appendChild(top);
    card.appendChild(images);
    card.appendChild(actions);
    return card;
  }

  function render(){
    try{
      grid.innerHTML = "";
      const filtered = straps.filter(matches);
      filtered.forEach(s => grid.appendChild(cardTemplate(s)));

      if (!filtered.length){
        const empty = document.createElement("div");
        empty.style.gridColumn = "1 / -1";
        empty.style.padding = "18px";
        empty.style.color = "var(--muted)";
        empty.textContent = "Aucun bracelet ne correspond à ce filtre.";
        grid.appendChild(empty);
      }
    } catch(err){
      showDebug("Render crash: " + (err && err.message ? err.message : String(err)));
    }
  }

  // init
  renderChips();
  render();
  pickedLink.style.opacity = ".55";
  pickedLink.style.pointerEvents = "none";

  search.addEventListener("input", (e) => {
    query = (e.target.value || "").trim().toLowerCase();
    render();
  });
})();
</script>
</body>
</html>
